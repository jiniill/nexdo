# Nexdo Roadmap (잔여 작업 정리)

이 문서는 현재 코드베이스 기준으로 **이미 구현된 것 vs 남은 것**을 거시적으로 정리한 로드맵이다.  
기능 상세 아이디어는 `# 완성도 높은 투두리스트 - 기능 설계.md`에 있고, 여기서는 “무엇을 언제/왜”에 초점을 둔다.

> 유지 규칙: 기능/리팩토링을 진행할 때마다 이 문서도 함께 업데이트한다.

---

## 0) 현재 상태(요약)

### 최근 업데이트(요약)
- Reports 페이지 추가(프로젝트별/태스크별 tracked 집계): `/reports`
- Reports에 기간 선택(Today/Week/Month/All) 추가 + 기간 합계는 타이머 세션 기반으로 계산
- 드롭다운/메뉴의 “클릭 아웃사이드 닫기” 로직을 `useClickOutside` 훅으로 공통화
- 헤더에 “현재 트래킹 중” 인디케이터(바로 이동/Stop) 추가
- 빠른 캡처에서 repeat 토큰 파싱(예: `매일`, `repeat:2w`, `until:YYYY-MM-DD`)

### 이미 구현됨(핵심 동작)
- 태스크 계층(부모/서브태스크) + 완료 전파(부모→자식, 자식 전체 완료→부모)
- 드래그앤드롭(리스트): 재정렬 + `Shift`로 하위로 넣기(nest)
- 프로젝트 CRUD + 프로젝트별 상태(Status) 관리 + 프로젝트 삭제 시 Inbox로 분리(detach)
- 뷰 모드: 리스트 / 보드 / 캘린더 / 간트
- 캘린더/간트에서 due date 드래그로 변경(HTML5 drag & drop)
- 반복(Repeat) MVP: 완료 시 다음 회차 생성(일/주/월, interval, end date)
- 타임 트래킹 MVP: 단일 활성 타이머 정책, 추적 시간 누적, 활동 로그(시작/정지) 기록, Inspector 제어
- 타이머 세션 기록: 트래킹 stop 시 세션을 저장(기간 리포트의 기반 데이터)
- Reports: 기간(Today/Week/Month/All) 기준 집계, 프로젝트별/태스크별 랭킹
- 오버레이/모달: 공통 `Portal`/`Modal` 도입으로 z-index 충돌/중복 코드 정리
- 빠른 캡처: `#project`, `@assignee`, `!priority`, `today/tomorrow/오늘/내일/YYYY-MM-DD` + 반복 토큰 일부 파싱

### 남아있는 핵심 리스크(요약)
- DnD UX 일관성(리스트/보드/캘린더/간트 간 “드래그 중 피드백” 통일)
- 반복 태스크(시리즈 vs 단건, 예외/휴일, RRULE 등) 고도화 난이도
- 타임 트래킹(리포트 고도화/일자별 히스토리, 포모도로, 백그라운드/재시작 안정성)
- 검색/필터(고급 검색, 저장된 필터/스마트 리스트)

---

## 1) 당장 남은 작업(안정화/UX)

### 1-1. 오버레이/레이어링 규칙 정착
- z-index 스케일(예: base/overlay/modal/popover/toast)을 문서화하고 전 컴포넌트에 적용
- 모달 UX 기본기: 스크롤 락, 포커스 트랩(탭 이동), aria 속성 정리
- 드롭다운/팝오버 공통 컴포넌트화(현재 `absolute top-full ... z-50` 패턴이 여러 파일에 반복)
  - 관련 선행 작업: 클릭 아웃사이드 처리는 `useClickOutside`로 공통화 완료

### 1-2. DnD 피드백(“뭐가 어디로 가는지”) 개선
- 드래그 중 hover 스타일/강조 표시 정책 통일(특히 트리 구조에서 서브태스크 위를 지나갈 때 오해 방지)
- “서브트리(부모+자식) 단위 이동”을 명확히 시각화(드래그 프리뷰/고스트, 드롭 인디케이터)
- 보드/캘린더/간트에도 동일한 데이터타입/드롭 UX 규칙 적용(현재는 HTML5 DnD 기반이지만 동작/표현이 분산됨)

### 1-3. Tailwind 중복 정리(리팩토링)
- 공통 UI 패턴을 `src/components/ui`로 흡수
  - `Popover`(컨테이너/포지셔닝/클릭아웃사이드)
  - `Menu`/`MenuItem`(드롭다운)
  - `IconButton`(동일한 원형 버튼 패턴)
  - `Card`/`Panel`(rounded + border + shadow)
  - `Kbd`(단축키 UI)
- “디자인 토큰” 수준의 className 세트(예: panel, overlay, muted text 등) 명명 규칙 정하기

---

## 2) 시간 관리(Time) 로드맵

### 2-1. 타임 트래킹 v1(개인 생산성)
- 리포트/집계
  - (완료) Reports 페이지 + 기간 선택(Today/Week/Month/All)
  - (완료) 타이머 세션 저장(기간 집계 가능)
  - (남음) 일자별 히스토리 시각화(예: 일별 바 차트/트렌드)
  - (남음) 프로젝트/태그/담당자별 합계 고도화(필터/기간 프리셋)
  - (남음) 예상(estimate) vs 실제(tracked) 비교(프로젝트 단위 등)
- 포모도로(옵션)
  - 25/5, 커스텀 세션, 알림/사운드(웹)
  - 세션 기록(활동 로그 확장 또는 별도 엔티티)
- 안정성
  - 탭 종료/새로고침 후 “진행 중 타이머” 복원 정책 명확화
  - 장시간 백그라운드에서 누적 오차/드리프트 보정

### 2-2. 캘린더/간트 고도화(스케줄링)
- 시간 블로킹(날짜 + 시간대) 모델 도입(현재는 due date 중심)
- 간트에서 “기간(시작/끝)” 또는 “duration” 편집
- 드래그 리사이즈(기간 조절), 멀티데이 태스크 표시
- 뷰 간 상호작용 통일(리스트↔캘린더↔간트 간 편집 UX)

---

## 3) 반복(Repeat) 로드맵

### 3-1. 반복 규칙 확장
- RRULE 수준(요일 지정, 매 2주 화/목, 매월 n번째 주 등)
- 예외 처리(exceptions)
  - 특정 날짜 건너뛰기
  - 휴일/주말 스킵 옵션
- 시리즈/인스턴스 편집 UX
  - “이것만 수정 / 이후 모두 수정 / 전체 수정”

### 3-2. 데이터 모델/저장 전략
- “시리즈 엔티티” 도입 여부 결정
  - 현재는 task 자체에 recurrence를 붙이고 완료 시 다음 task를 생성하는 방식(MVP)
  - v2에서는 시리즈(템플릿)와 인스턴스(발생분)를 분리하면 UX/예외처리가 쉬워짐

---

## 4) 의존성 & 워크플로우(프로젝트 관리 강화)

### 4-1. 태스크 의존성
- Finish-to-Start 기본부터(블로킹 표시, 차단 이유)
- 순환 의존성 감지 및 경고
- 의존성 시각화(간단한 그래프/리스트) → 추후 DAG/critical path

### 4-2. 자동화(트리거-액션)
- 기본 트리거: 상태 변경/라벨 추가/담당자 변경/기한 임박
- 기본 액션: 상태 변경/알림/하위태스크 생성/템플릿 적용

---

## 5) 검색/필터/뷰(정보 접근성)

### 5-1. 고급 검색
- AND/OR/NOT, 필드 지정 검색(예: `project:alpha due:<2026-01-31 label:urgent`)
- full-text 품질 개선(설명/코멘트 포함, 가중치)

### 5-2. 저장된 필터(스마트 리스트)
- “내 일감”, “이번주 마감”, “긴급+중요” 등 프리셋
- 사용자 정의 + 사이드바 고정

---

## 6) 데이터 & 통합(로컬 퍼스트에서 확장)

### 6-1. 데이터 관리
- import/export 포맷 확장(JSON 외 CSV/Markdown)
- 마이그레이션/스키마 버저닝(로컬스토리지 데이터 깨짐 방지)
- 히스토리/버전(undo/redo 또는 변경 이력)

### 6-2. 외부 연동(선택)
- 캘린더 동기화(ICS export부터)
- Webhook/API(추후 백엔드 도입 시)

---

## 7) 협업(멀티유저) — 장기 과제
- 공유/권한(프로젝트/태스크 단위)
- 코멘트 스레드 + @멘션 알림
- 실시간 동기화(Yjs/Liveblocks 등) 또는 서버 기반

---

## 8) 추천 진행 순서(거시 플랜)

1) 안정화/UX: 오버레이 규칙 + DnD 피드백 통일 + UI 중복 컴포넌트화  
2) Time v1: 리포트/집계 + 포모도로(옵션) + 타이머 재시작 안정성  
3) Repeat v2: RRULE/예외 + 시리즈/단건 편집 모델 결정  
4) Calendar/Gantt v2: 시간 블로킹 + 기간/리사이즈  
5) Dependencies/Automation: 워크플로우 고도화  
6) Search/Smart Lists: 정보 접근성 강화  
7) Data/Integrations/Collab: 필요 시 확장
